<app-menu></app-menu>

<h1 class="mt-4">Tabla Actuaciones</h1>

<mat-card class="mt-4">
	<mat-card-content>
		<mat-form-field>
			<mat-label>Filter</mat-label>
			<input matInput [(ngModel)]="filtro" (ngModelChange)="filtrarPorNombre()" #materiaInput />
		</mat-form-field>

		<mat-form-field>
			<mat-label>Estado</mat-label>
			<mat-select [(value)]="estadoBool" (valueChange)="applyFilter()" #activoSelect>
				<mat-option value="true">Activo</mat-option>
				<mat-option value="false">Inactivo</mat-option>
				<mat-option value="">Todos</mat-option>
			</mat-select>
		</mat-form-field>

		<section class="demo-button-container mb-4">
			<button mat-raised-button (click)="modalInsertar()" class="demo-button">AÃ±adir nuevo</button>
		</section>

		<table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
			<ng-container matColumnDef="id">
				<th mat-header-cell *matHeaderCellDef>No.</th>
				<td mat-cell *matCellDef="let element">{{ element.id }}</td>
			</ng-container>

			<ng-container matColumnDef="expediente">
				<th mat-header-cell *matHeaderCellDef>Expediente</th>
				<td mat-cell *matCellDef="let element">{{ element.expediente.codigo }}</td>
			</ng-container>

			<ng-container matColumnDef="responsable">
				<th mat-header-cell *matHeaderCellDef>Nombre Responsable</th>
				<td mat-cell *matCellDef="let element">{{ element.responsable }}</td>
			</ng-container>

			<ng-container matColumnDef="fecha">
				<th mat-header-cell *matHeaderCellDef>Fecha Emitida</th>
				<td mat-cell *matCellDef="let element">{{ element.fecha }}</td>
			</ng-container>

			<ng-container matColumnDef="descripcion">
				<th mat-header-cell *matHeaderCellDef>Descripcion</th>
				<td mat-cell *matCellDef="let element">{{ element.descripcion }}</td>
			</ng-container>

			<ng-container matColumnDef="finalizado">
				<th mat-header-cell *matHeaderCellDef>Finalizado</th>
				<td mat-cell *matCellDef="let element">{{ element.finalizado ? 'Finalizado' : 'Activo' }}</td>
			</ng-container>

			<ng-container matColumnDef="observaciones">
				<th mat-header-cell *matHeaderCellDef>Observaciones</th>
				<td mat-cell *matCellDef="let element">{{ element.observaciones }}</td>
			</ng-container>

			<ng-container matColumnDef="edit">
				<th mat-header-cell *matHeaderCellDef>Editar</th>
				<td mat-cell *matCellDef="let element">
					<button mat-icon-button (click)="modalModificar(element.id)">
						<mat-icon>edit</mat-icon>
					</button>
				</td>
			</ng-container>

			<ng-container matColumnDef="delete">
				<th mat-header-cell *matHeaderCellDef>Eliminar/Activar</th>
				<td mat-cell *matCellDef="let element">
					<button mat-icon-button (click)="deleteData(element.id, element.finalizado)">
						<mat-icon>delete</mat-icon>
					</button>
				</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
		</table>
	</mat-card-content>
</mat-card>
